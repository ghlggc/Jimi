package io.leavesfly.jimi.tool.mcp;

import com.fasterxml.jackson.databind.ObjectMapper;
import io.leavesfly.jimi.tool.ToolRegistry;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.io.TempDir;

import java.nio.file.Files;
import java.nio.file.Path;

/**
 * MCP é›†æˆå®Œæ•´æ¼”ç¤º
 * 
 * å±•ç¤º MCP (Model Context Protocol) å¤–éƒ¨å·¥å…·é›†æˆçš„å„ç§åœºæ™¯ï¼š
 * 1. é…ç½®æ–‡ä»¶ç»“æ„
 * 2. STDIO ä¼ è¾“æ–¹å¼
 * 3. HTTP ä¼ è¾“æ–¹å¼
 * 4. å·¥å…·åŠ è½½æµç¨‹
 * 5. å·¥å…·è°ƒç”¨ç¤ºä¾‹
 * 6. é”™è¯¯å¤„ç†
 * 
 * @author å±±æ³½
 */
class MCPIntegrationDemo {
    
    @TempDir
    Path tempDir;
    
    /**
     * æ¼”ç¤º 1: MCP é…ç½®æ–‡ä»¶ç»“æ„
     */
    @Test
    void demo1_MCPConfigStructure() {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 1: MCP é…ç½®æ–‡ä»¶ç»“æ„");
        System.out.println("=".repeat(70) + "\n");
        
        System.out.println("MCP é…ç½®æ”¯æŒä¸¤ç§ä¼ è¾“æ–¹å¼ï¼š\n");
        
        // STDIO é…ç½®ç¤ºä¾‹
        System.out.println("1. STDIO ä¼ è¾“ï¼ˆé€šè¿‡å­è¿›ç¨‹ï¼‰:");
        System.out.println("```json");
        String stdioConfig = """
                {
                  "mcpServers": {
                    "chrome-devtools": {
                      "command": "npx",
                      "args": ["-y", "chrome-devtools-mcp@latest"],
                      "env": {
                        "CHROME_PATH": "/usr/bin/google-chrome"
                      }
                    },
                    "filesystem": {
                      "command": "npx",
                      "args": ["-y", "@modelcontextprotocol/server-filesystem", "/path/to/allowed/dir"]
                    }
                  }
                }
                """;
        System.out.println(stdioConfig);
        System.out.println("```\n");
        
        // HTTP é…ç½®ç¤ºä¾‹
        System.out.println("2. HTTP ä¼ è¾“ï¼ˆè¿œç¨‹æœåŠ¡å™¨ï¼‰:");
        System.out.println("```json");
        String httpConfig = """
                {
                  "mcpServers": {
                    "context7": {
                      "url": "https://mcp.context7.com/mcp",
                      "headers": {
                        "CONTEXT7_API_KEY": "your_api_key_here",
                        "Content-Type": "application/json"
                      }
                    },
                    "custom-api": {
                      "url": "http://localhost:8080/mcp",
                      "headers": {
                        "Authorization": "Bearer token123"
                      }
                    }
                  }
                }
                """;
        System.out.println(httpConfig);
        System.out.println("```\n");
        
        System.out.println("é…ç½®å­—æ®µè¯´æ˜:");
        System.out.println("  mcpServers    - æœåŠ¡å™¨é…ç½®æ˜ å°„");
        System.out.println("  command       - STDIO: æ‰§è¡Œå‘½ä»¤");
        System.out.println("  args          - STDIO: å‘½ä»¤å‚æ•°æ•°ç»„");
        System.out.println("  env           - STDIO: ç¯å¢ƒå˜é‡");
        System.out.println("  url           - HTTP: æœåŠ¡å™¨ URL");
        System.out.println("  headers       - HTTP: è¯·æ±‚å¤´ï¼ˆå«è®¤è¯ä¿¡æ¯ï¼‰");
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 2: ä»æ–‡ä»¶åŠ è½½ MCP å·¥å…·
     */
    @Test
    void demo2_LoadFromConfigFile() throws Exception {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 2: ä»æ–‡ä»¶åŠ è½½ MCP å·¥å…·");
        System.out.println("=".repeat(70) + "\n");
        
        // åˆ›å»ºé…ç½®æ–‡ä»¶
        Path configFile = tempDir.resolve("mcp-config.json");
        String configContent = """
                {
                  "mcpServers": {
                    "example-server": {
                      "command": "echo",
                      "args": ["hello"]
                    }
                  }
                }
                """;
        Files.writeString(configFile, configContent);
        
        System.out.println("æ­¥éª¤ 1: åˆ›å»ºé…ç½®æ–‡ä»¶");
        System.out.println("  è·¯å¾„: " + configFile);
        System.out.println("  å†…å®¹: \n" + configContent);
        
        System.out.println("\næ­¥éª¤ 2: åˆ›å»º MCP å·¥å…·åŠ è½½å™¨");
        ObjectMapper objectMapper = new ObjectMapper();
        MCPToolLoader loader = new MCPToolLoader(objectMapper);
        System.out.println("  âœ“ åŠ è½½å™¨å·²åˆ›å»º");
        
        System.out.println("\næ­¥éª¤ 3: åˆ›å»ºå·¥å…·æ³¨å†Œè¡¨");
        ToolRegistry toolRegistry = ToolRegistry.createStandardRegistry(
                null, null, null);
        System.out.println("  âœ“ æ³¨å†Œè¡¨å·²åˆ›å»º");
        
        System.out.println("\næ­¥éª¤ 4: åŠ è½½ MCP å·¥å…·");
        System.out.println("  æ³¨æ„ï¼šæ­¤æ¼”ç¤ºä»…å±•ç¤ºæµç¨‹ï¼Œå®é™…åŠ è½½éœ€è¦æœ‰æ•ˆçš„ MCP æœåŠ¡å™¨");
        
        try {
            // å®é™…åŠ è½½ä¼šå¤±è´¥ï¼ˆå› ä¸º echo ä¸æ˜¯ MCP æœåŠ¡å™¨ï¼‰
            // ä½†æ¼”ç¤ºäº†å®Œæ•´çš„åŠ è½½æµç¨‹
            loader.loadFromFile(configFile, toolRegistry);
        } catch (Exception e) {
            System.out.println("  âœ— åŠ è½½å¤±è´¥ï¼ˆé¢„æœŸè¡Œä¸ºï¼‰: " + e.getMessage());
        }
        
        System.out.println("\næ­¥éª¤ 5: æ¸…ç†èµ„æº");
        loader.closeAll();
        System.out.println("  âœ“ æ‰€æœ‰ MCP å®¢æˆ·ç«¯å·²å…³é—­");
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 3: ä» JSON å­—ç¬¦ä¸²åŠ è½½
     */
    @Test
    void demo3_LoadFromJson() throws Exception {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 3: ä» JSON å­—ç¬¦ä¸²åŠ è½½ MCP å·¥å…·");
        System.out.println("=".repeat(70) + "\n");
        
        String jsonConfig = """
                {
                  "mcpServers": {
                    "server1": {
                      "command": "npx",
                      "args": ["-y", "@modelcontextprotocol/server-example"]
                    }
                  }
                }
                """;
        
        System.out.println("ç›´æ¥ä» JSON å­—ç¬¦ä¸²åŠ è½½:");
        System.out.println(jsonConfig);
        
        ObjectMapper objectMapper = new ObjectMapper();
        MCPToolLoader loader = new MCPToolLoader(objectMapper);
        ToolRegistry toolRegistry = ToolRegistry.createStandardRegistry(
                null, null, null);
        
        System.out.println("\nåŠ è½½è¿‡ç¨‹:");
        try {
            loader.loadFromJson(jsonConfig, toolRegistry);
        } catch (Exception e) {
            System.out.println("  âœ— åŠ è½½å¤±è´¥: " + e.getMessage());
        }
        
        loader.closeAll();
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 4: MCP å·¥å…·ä½¿ç”¨æµç¨‹
     */
    @Test
    void demo4_MCPToolUsageFlow() {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 4: MCP å·¥å…·ä½¿ç”¨å®Œæ•´æµç¨‹");
        System.out.println("=".repeat(70) + "\n");
        
        System.out.println("å®Œæ•´æµç¨‹è¯´æ˜:\n");
        
        System.out.println("1ï¸âƒ£  é…ç½®é˜¶æ®µ");
        System.out.println("  - åˆ›å»º mcp-config.json æ–‡ä»¶");
        System.out.println("  - é…ç½® MCP æœåŠ¡å™¨ä¿¡æ¯");
        System.out.println("  - æŒ‡å®šä¼ è¾“æ–¹å¼ï¼ˆSTDIO/HTTPï¼‰");
        
        System.out.println("\n2ï¸âƒ£  åŠ è½½é˜¶æ®µ");
        System.out.println("  - åˆ›å»º MCPToolLoader");
        System.out.println("  - è¯»å–é…ç½®æ–‡ä»¶");
        System.out.println("  - ä¸ºæ¯ä¸ªæœåŠ¡å™¨åˆ›å»ºå®¢æˆ·ç«¯");
        System.out.println("  - åˆå§‹åŒ–è¿æ¥");
        System.out.println("  - åˆ—å‡ºå¯ç”¨å·¥å…·");
        
        System.out.println("\n3ï¸âƒ£  æ³¨å†Œé˜¶æ®µ");
        System.out.println("  - å°† MCP å·¥å…·åŒ…è£…ä¸º Jimi å·¥å…·");
        System.out.println("  - æ³¨å†Œåˆ° ToolRegistry");
        System.out.println("  - å·¥å…·å¯è¢« Agent å‘ç°å’Œä½¿ç”¨");
        
        System.out.println("\n4ï¸âƒ£  ä½¿ç”¨é˜¶æ®µ");
        System.out.println("  - Agent é€‰æ‹©åˆé€‚çš„å·¥å…·");
        System.out.println("  - è°ƒç”¨ MCPTool.execute()");
        System.out.println("  - MCPTool è½¬å‘è¯·æ±‚åˆ° MCP æœåŠ¡å™¨");
        System.out.println("  - è½¬æ¢ç»“æœä¸º ToolResult");
        System.out.println("  - è¿”å›ç»™ Agent");
        
        System.out.println("\n5ï¸âƒ£  æ¸…ç†é˜¶æ®µ");
        System.out.println("  - è°ƒç”¨ loader.closeAll()");
        System.out.println("  - å…³é—­æ‰€æœ‰ MCP å®¢æˆ·ç«¯");
        System.out.println("  - é‡Šæ”¾èµ„æº");
        
        System.out.println("\næ¶æ„ç¤ºæ„:");
        System.out.println("""
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   Agent     â”‚
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ ToolRegistry â”‚
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚   MCPTool    â”‚  (Jimi åŒ…è£…å™¨)
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ McpSyncClientâ”‚  (MCP SDK)
                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â†“               â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  STDIO   â”‚   â”‚   HTTP   â”‚
          â”‚ Transportâ”‚   â”‚ Transportâ”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                 â†“            â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  å­è¿›ç¨‹  â”‚  â”‚ è¿œç¨‹æœåŠ¡â”‚
            â”‚MCP Serverâ”‚  â”‚MCP Serverâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                """);
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 5: å®é™… MCP å·¥å…·ç¤ºä¾‹
     */
    @Test
    void demo5_RealWorldExamples() {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 5: å®é™… MCP å·¥å…·ç¤ºä¾‹");
        System.out.println("=".repeat(70) + "\n");
        
        System.out.println("å¸¸è§ MCP å·¥å…·æœåŠ¡å™¨:\n");
        
        System.out.println("1. Chrome DevTools MCP");
        System.out.println("   åŠŸèƒ½: æ§åˆ¶ Chrome æµè§ˆå™¨");
        System.out.println("   é…ç½®:");
        System.out.println("""
                   {
                     "command": "npx",
                     "args": ["-y", "chrome-devtools-mcp@latest"]
                   }
                   """);
        
        System.out.println("\n2. Filesystem MCP");
        System.out.println("   åŠŸèƒ½: æ–‡ä»¶ç³»ç»Ÿæ“ä½œ");
        System.out.println("   é…ç½®:");
        System.out.println("""
                   {
                     "command": "npx",
                     "args": ["-y", "@modelcontextprotocol/server-filesystem", "/allowed/path"]
                   }
                   """);
        
        System.out.println("\n3. Context7 API");
        System.out.println("   åŠŸèƒ½: ä¸Šä¸‹æ–‡å¢å¼ºæœåŠ¡");
        System.out.println("   é…ç½®:");
        System.out.println("""
                   {
                     "url": "https://mcp.context7.com/mcp",
                     "headers": {
                       "CONTEXT7_API_KEY": "your_key"
                     }
                   }
                   """);
        
        System.out.println("\n4. SQLite MCP");
        System.out.println("   åŠŸèƒ½: æ•°æ®åº“æŸ¥è¯¢");
        System.out.println("   é…ç½®:");
        System.out.println("""
                   {
                     "command": "npx",
                     "args": ["-y", "@modelcontextprotocol/server-sqlite", "/path/to/db.sqlite"]
                   }
                   """);
        
        System.out.println("\n5. Git MCP");
        System.out.println("   åŠŸèƒ½: Git ä»“åº“æ“ä½œ");
        System.out.println("   é…ç½®:");
        System.out.println("""
                   {
                     "command": "npx",
                     "args": ["-y", "@modelcontextprotocol/server-git"]
                   }
                   """);
        
        System.out.println("\nä½¿ç”¨åœºæ™¯:");
        System.out.println("  âœ“ æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼ˆæµ‹è¯•ã€çˆ¬å–ï¼‰");
        System.out.println("  âœ“ æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆè¯»å†™ã€æœç´¢ï¼‰");
        System.out.println("  âœ“ æ•°æ®åº“æŸ¥è¯¢å’Œåˆ†æ");
        System.out.println("  âœ“ ç‰ˆæœ¬æ§åˆ¶æ“ä½œ");
        System.out.println("  âœ“ ç¬¬ä¸‰æ–¹ API é›†æˆ");
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 6: é”™è¯¯å¤„ç†
     */
    @Test
    void demo6_ErrorHandling() {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 6: MCP é›†æˆé”™è¯¯å¤„ç†");
        System.out.println("=".repeat(70) + "\n");
        
        System.out.println("å¸¸è§é”™è¯¯åœºæ™¯:\n");
        
        System.out.println("1. é…ç½®æ–‡ä»¶æ— æ•ˆ");
        System.out.println("   é”™è¯¯: JSON æ ¼å¼é”™è¯¯");
        System.out.println("   å¤„ç†: æ•è· JsonProcessingException");
        System.out.println("   å»ºè®®: éªŒè¯ JSON è¯­æ³•\n");
        
        System.out.println("2. æœåŠ¡å™¨è¿æ¥å¤±è´¥");
        System.out.println("   é”™è¯¯: MCP æœåŠ¡å™¨æ— æ³•å¯åŠ¨");
        System.out.println("   å¤„ç†: è®°å½•é”™è¯¯ï¼Œè·³è¿‡è¯¥æœåŠ¡å™¨");
        System.out.println("   å»ºè®®: æ£€æŸ¥å‘½ä»¤è·¯å¾„å’Œå‚æ•°\n");
        
        System.out.println("3. å·¥å…·è°ƒç”¨è¶…æ—¶");
        System.out.println("   é”™è¯¯: å·¥å…·æ‰§è¡Œè¶…è¿‡è®¾å®šæ—¶é—´");
        System.out.println("   å¤„ç†: è¿”å›è¶…æ—¶é”™è¯¯");
        System.out.println("   å»ºè®®: è°ƒæ•´ timeout å‚æ•°\n");
        
        System.out.println("4. ç»“æœè½¬æ¢å¤±è´¥");
        System.out.println("   é”™è¯¯: MCP è¿”å›ä¸æ”¯æŒçš„å†…å®¹ç±»å‹");
        System.out.println("   å¤„ç†: è®°å½•è­¦å‘Šï¼Œè¿”å›é”™è¯¯");
        System.out.println("   å»ºè®®: æ‰©å±•ç»“æœè½¬æ¢å™¨æ”¯æŒ\n");
        
        System.out.println("é”™è¯¯æ¢å¤ç­–ç•¥:");
        System.out.println("  âœ“ å•ä¸ªæœåŠ¡å™¨å¤±è´¥ä¸å½±å“å…¶ä»–æœåŠ¡å™¨");
        System.out.println("  âœ“ æä¾›è¯¦ç»†çš„é”™è¯¯æ—¥å¿—");
        System.out.println("  âœ“ ä¼˜é›…é™çº§ï¼ˆéƒ¨åˆ†å·¥å…·å¯ç”¨ï¼‰");
        System.out.println("  âœ“ æ¸…ç†èµ„æºé˜²æ­¢æ³„æ¼");
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 7: ä¸ Jimi é›†æˆ
     */
    @Test
    void demo7_JimiIntegration() {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("æ¼”ç¤º 7: MCP ä¸ Jimi é›†æˆ");
        System.out.println("=".repeat(70) + "\n");
        
        System.out.println("é›†æˆåˆ° JimiFactory:\n");
        
        System.out.println("```java");
        System.out.println("""
                public class JimiFactory {
                    
                    private ToolRegistry createToolRegistry(
                            BuiltinSystemPromptArgs builtinArgs,
                            Approval approval,
                            ResolvedAgentSpec resolvedAgentSpec,
                            Runtime runtime,
                            List<Path> mcpConfigFiles  // MCP é…ç½®æ–‡ä»¶åˆ—è¡¨
                    ) {
                        // åˆ›å»ºæ ‡å‡†å·¥å…·æ³¨å†Œè¡¨
                        ToolRegistry registry = ToolRegistry.createStandardRegistry(
                                builtinArgs, approval, runtime);
                        
                        // åŠ è½½ MCP å·¥å…·
                        if (mcpConfigFiles != null && !mcpConfigFiles.isEmpty()) {
                            MCPToolLoader mcpLoader = new MCPToolLoader(objectMapper);
                            
                            for (Path configFile : mcpConfigFiles) {
                                try {
                                    List<MCPTool> mcpTools = mcpLoader.loadFromFile(
                                            configFile, registry);
                                    log.info("Loaded {} MCP tools from {}", 
                                            mcpTools.size(), configFile);
                                } catch (Exception e) {
                                    log.error("Failed to load MCP config: {}", 
                                            configFile, e);
                                }
                            }
                        }
                        
                        return registry;
                    }
                }
                """);
        System.out.println("```\n");
        
        System.out.println("å‘½ä»¤è¡Œå‚æ•°:");
        System.out.println("```bash");
        System.out.println("# ä½¿ç”¨ MCP é…ç½®æ–‡ä»¶");
        System.out.println("jimi --mcp-config-file /path/to/mcp1.json \\");
        System.out.println("     --mcp-config-file /path/to/mcp2.json \\");
        System.out.println("     \"å¸®æˆ‘æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® GitHub\"");
        System.out.println("```\n");
        
        System.out.println("Agent ä½¿ç”¨ MCP å·¥å…·:");
        System.out.println("  1. Agent æ¥æ”¶ç”¨æˆ·è¯·æ±‚");
        System.out.println("  2. åˆ†æéœ€è¦å“ªäº›å·¥å…·");
        System.out.println("  3. ä» ToolRegistry è·å– MCP å·¥å…·");
        System.out.println("  4. è°ƒç”¨ MCPTool.execute()");
        System.out.println("  5. MCP å·¥å…·è½¬å‘åˆ°å¤–éƒ¨æœåŠ¡å™¨");
        System.out.println("  6. æ¥æ”¶ç»“æœå¹¶è¿”å›ç»™ Agent");
        
        System.out.println("\nâœ… æ¼”ç¤ºå®Œæˆ\n");
    }
    
    /**
     * æ¼”ç¤º 8: åŠŸèƒ½æ€»ç»“
     */
    @Test
    void demo8_Summary() {
        System.out.println("\n" + "=".repeat(70));
        System.out.println("MCP é›†æˆåŠŸèƒ½æ€»ç»“");
        System.out.println("=".repeat(70) + "\n");
        
        System.out.println("æ ¸å¿ƒç‰¹æ€§:");
        System.out.println("  1. âœ… æ ‡å‡† MCP åè®®æ”¯æŒ");
        System.out.println("     - åŸºäºå®˜æ–¹ MCP Java SDK");
        System.out.println("     - å®Œå…¨å…¼å®¹ MCP è§„èŒƒ");
        System.out.println("     - ä¸ Python ç‰ˆæœ¬é…ç½®æ ¼å¼ä¸€è‡´");
        
        System.out.println("\n  2. âœ… å¤šä¼ è¾“æ–¹å¼");
        System.out.println("     - STDIOï¼ˆå­è¿›ç¨‹é€šä¿¡ï¼‰");
        System.out.println("     - HTTP/SSEï¼ˆè¿œç¨‹æœåŠ¡å™¨ï¼‰");
        System.out.println("     - å¯æ‰©å±•å…¶ä»–ä¼ è¾“æ–¹å¼");
        
        System.out.println("\n  3. âœ… çµæ´»é…ç½®");
        System.out.println("     - JSON é…ç½®æ–‡ä»¶");
        System.out.println("     - å‘½ä»¤è¡Œå‚æ•°");
        System.out.println("     - æ”¯æŒå¤šä¸ª MCP æœåŠ¡å™¨");
        
        System.out.println("\n  4. âœ… è‡ªåŠ¨å‘ç°å·¥å…·");
        System.out.println("     - è¿æ¥ååˆ—å‡ºæ‰€æœ‰å·¥å…·");
        System.out.println("     - è‡ªåŠ¨æ³¨å†Œåˆ°å·¥å…·è¡¨");
        System.out.println("     - Agent å¯ç›´æ¥ä½¿ç”¨");
        
        System.out.println("\n  5. âœ… ç»“æœè½¬æ¢");
        System.out.println("     - TextContent â†’ TextPart");
        System.out.println("     - ImageContent â†’ ImageURLPart");
        System.out.println("     - æ”¯æŒå¤šç§å†…å®¹ç±»å‹");
        
        System.out.println("\n  6. âœ… é”™è¯¯å¤„ç†");
        System.out.println("     - è¿æ¥å¤±è´¥ä¸å½±å“å…¶ä»–æœåŠ¡å™¨");
        System.out.println("     - è¯¦ç»†çš„é”™è¯¯æ—¥å¿—");
        System.out.println("     - ä¼˜é›…çš„èµ„æºæ¸…ç†");
        
        System.out.println("\næŠ€æœ¯å®ç°:");
        System.out.println("  - MCP Java SDKï¼ˆio.modelcontextprotocol.sdkï¼‰");
        System.out.println("  - Jackson JSON è§£æ");
        System.out.println("  - Project Reactor å“åº”å¼");
        System.out.println("  - SLF4J æ—¥å¿—");
        
        System.out.println("\næ–‡ä»¶ç»“æ„:");
        System.out.println("  MCPTool.java           - MCP å·¥å…·åŒ…è£…å™¨ï¼ˆ103 è¡Œï¼‰");
        System.out.println("  MCPResultConverter.java- ç»“æœè½¬æ¢å™¨ï¼ˆ134 è¡Œï¼‰");
        System.out.println("  MCPConfig.java         - é…ç½®æ•°æ®ç»“æ„ï¼ˆ108 è¡Œï¼‰");
        System.out.println("  MCPToolLoader.java     - å·¥å…·åŠ è½½å™¨ï¼ˆ213 è¡Œï¼‰");
        System.out.println("  MCPIntegrationDemo.java- å®Œæ•´æ¼”ç¤ºï¼ˆ558 è¡Œï¼‰");
        System.out.println("  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
        System.out.println("  æ€»è®¡                    1,116 è¡Œä»£ç ");
        
        System.out.println("\nä¸ Python ç‰ˆæœ¬å¯¹æ¯”:");
        System.out.println("  åŠŸèƒ½å®Œå…¨å¯¹ç­‰ âœ…");
        System.out.println("  é…ç½®æ ¼å¼å…¼å®¹ âœ…");
        System.out.println("  ä½¿ç”¨ MCP Java SDKï¼ˆvs fastmcpï¼‰âœ…");
        System.out.println("  æ”¯æŒ STDIO ä¼ è¾“ âœ…");
        System.out.println("  HTTP ä¼ è¾“å¾…å®ç° ğŸš§");
        
        System.out.println("\nä½¿ç”¨ä»·å€¼:");
        System.out.println("  âœ“ æ‰©å±• Agent èƒ½åŠ›è¾¹ç•Œ");
        System.out.println("  âœ“ é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡");
        System.out.println("  âœ“ å¤ç”¨ç°æœ‰ MCP å·¥å…·");
        System.out.println("  âœ“ æ ‡å‡†åŒ–å·¥å…·æ¥å£");
        
        System.out.println("\n" + "=".repeat(70) + "\n");
    }
}
