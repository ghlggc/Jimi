# ç¤ºä¾‹: å¿«é€Ÿæ„å»ºå‘½ä»¤
# ä½ç½®: ~/.jimi/commands/quick-build.yaml

name: "quick-build"
description: "å¿«é€Ÿæ„å»ºé¡¹ç›®å¹¶è¿è¡Œæµ‹è¯•"
category: "build"
priority: 10

# å‘½ä»¤åˆ«å
aliases:
  - "qb"
  - "build"

# ç”¨æ³•è¯´æ˜
usage: "/quick-build [--skip-tests]"

# å‚æ•°å®šä¹‰
parameters:
  - name: "skip-tests"
    type: "boolean"
    defaultValue: "false"
    description: "æ˜¯å¦è·³è¿‡æµ‹è¯•"

# æ‰§è¡Œé…ç½®
execution:
  type: "script"
  script: |
    #!/bin/bash
    set -e
    
    echo "ğŸ”¨ å¼€å§‹æ„å»ºé¡¹ç›®..."
    
    if [ "$SKIP_TESTS" = "true" ]; then
      echo "â­ï¸  è·³è¿‡æµ‹è¯•"
      mvn clean install -DskipTests
    else
      echo "âœ… è¿è¡Œæµ‹è¯•"
      mvn clean install
    fi
    
    echo "âœ¨ æ„å»ºå®Œæˆ!"
  
  workingDir: "${JIMI_WORK_DIR}"
  timeout: 300
  environment:
    MAVEN_OPTS: "-Xmx1024m"

# å‰ç½®æ¡ä»¶
preconditions:
  - type: "file_exists"
    path: "pom.xml"
    errorMessage: "å½“å‰ç›®å½•ä¸æ˜¯ Maven é¡¹ç›®"
  - type: "command_exists"
    command: "mvn"
    errorMessage: "Maven æœªå®‰è£…"

# æ˜¯å¦éœ€è¦å®¡æ‰¹
requireApproval: false

# æ˜¯å¦å¯ç”¨
enabled: true
