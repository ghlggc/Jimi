# 示例: Git 提交命令
# 位置: ~/.jimi/commands/git-commit.yaml

name: "git-commit"
description: "快速添加所有更改并提交"
category: "git"
priority: 5

aliases:
  - "gc"

usage: "/git-commit <message>"

parameters:
  - name: "message"
    type: "string"
    required: true
    description: "提交消息"

execution:
  type: "composite"
  steps:
    - type: "script"
      description: "添加所有更改"
      script: "git add ."
      continueOnFailure: false
    
    - type: "script"
      description: "提交更改"
      script: |
        git commit -m "${MESSAGE}"
      continueOnFailure: false
    
    - type: "script"
      description: "显示状态"
      script: "git status"
      continueOnFailure: true

preconditions:
  - type: "dir_exists"
    path: ".git"
    errorMessage: "当前目录不是 Git 仓库"
  - type: "command_exists"
    command: "git"
    errorMessage: "Git 未安装"

requireApproval: false
enabled: true
